<!DOCTYPE html>
<html>
<head>
    <title>Flood Prone Streets - Ernakulam</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <style>
        #map { height: 600px; width: 100%; }
        body { font-family: Arial, sans-serif; padding: 20px; }
        h2, h3 { text-align: center; }
        #bolt-alert { text-align: center; font-size: 18px; margin-top: 20px; }
    </style>
</head>
<body>

    <h2>Flood Prone Streets Real-Time Visualizer (Simulation)</h2>
    <div id="map"></div>

    <h3>Bolt AI Integration Simulation</h3>
    <p style="text-align: center;">If Bolt water sensor reading > 5cm → Show flood alert (simulated below):</p>
    <div id="bolt-alert"></div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <script>
        // Initialize map centered at Ernakulam
        var map = L.map('map').setView([9.9816, 76.2858], 13);

        // Load OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // Simulated flood-prone locations
        var floodData = [
            { name: 'MG Road', lat: 9.9816, lon: 76.2858, flood_level: Math.floor(Math.random()*10)+1 },
            { name: 'Kaloor', lat: 9.9987, lon: 76.2997, flood_level: Math.floor(Math.random()*10)+1 },
            { name: 'Edappally', lat: 10.0272, lon: 76.3089, flood_level: Math.floor(Math.random()*10)+1 },
            { name: 'Vyttila', lat: 9.9676, lon: 76.3182, flood_level: Math.floor(Math.random()*10)+1 },
            { name: 'Fort Kochi', lat: 9.9667, lon: 76.2425, flood_level: Math.floor(Math.random()*10)+1 }
        ];

        // Add markers for each location
        floodData.forEach(function(loc) {
            var color = loc.flood_level >= 5 ? 'red' : 'green';
            var marker = L.circleMarker([loc.lat, loc.lon], {
                radius: 8,
                fillColor: color,
                color: "#000",
                weight: 1,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(map);
            marker.bindPopup(loc.name + " - Flood Level: " + loc.flood_level);
        });

        // Bolt AI Integration Simulation
        var boltWaterLevel = Math.floor(Math.random() * 10); // Random 0-9 cm
        if (boltWaterLevel > 5) {
            document.getElementById('bolt-alert').innerHTML = "⚠️ ALERT: Water level high (" + boltWaterLevel + " cm)";
        } else {
            document.getElementById('bolt-alert').innerHTML = "✅ Water level normal (" + boltWaterLevel + " cm)";
        }
    </script>

</body>
</html>
